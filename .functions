## NPM / repo scaffolds

function npmify() {
    ngenplus $1 $2
    nstart
}

function nstart() {
    git init
    git add .
    git commit -m "initial"
    hub create Raynos/$(basename $PWD)
    travisify
    travisify test
    npublish
}

function colingo-nstart() {
    git init
    git add .
    git commit -m "initial"
    hub create Colingo/$(basename $PWD)
    travisify
    travisify test
    npublish
}

function ngenplus() {
    local projectName=$1
    local isFree=""

    isFree="$(npm info $projectName 2>&1 | grep 'npm ERR! 404 You should bug the author to publish it')"

    # if $isFree is empty then BAD. If it's not empty then GOOD
    if [[ ! -n "$isFree" ]]; then
        echo "$projectName already taken on npm"
        npm info ${projectName} name description author
        return
    fi

    local fileLocation="$(pwd)/$2"

    cd ~/projects
    ngen $1
    cd $1

    if [ ! -z $2 ]; then
        cp "$fileLocation" ./index.js
    fi

    npm i
}

function colingo-ngenplus() {
    local projectName=$1
    local isFree=""

    isFree="$(npm info $projectName 2>&1 | grep 'npm ERR! 404 You should bug the author to publish it')"

    # if $isFree is empty then BAD. If it's not empty then GOOD
    if [[ ! -n "$isFree" ]]; then
        echo "$projectName already taken on npm"
        npm info ${projectName} name description author
        return
    fi

    local fileLocation="$(pwd)/$2"

    cd ~/projects
    colingo-ngen $1
    cd $1

    if [ ! -z $2 ]; then
        cp "$fileLocation" ./index.js
    fi

    npm i
}

## Git and github work flows

# TODO: write function
function pr_github() {
    local branch=${2:-master}
    git push origin $branch
    echo git push origin $branch
    local uri="$(hub pull-request "$1" -h Raynos:$branch -b Colingo:$branch)"
    echo hub pull-request "$1" -h Raynos:$branch -b Colingo:$branch
    echo "open $uri"
    google-chrome "$uri"
    # TODO: auto merge
}

## Test & testing work flows

function testem-node() {
    testem --file="$HOME/testem/node.json"
}

function testem-browser() {
    testem --file="$HOME/testem/browser.json"
}

function testem-both() {
    testem --file="$HOME/testem/both.json"
}

## Utils

function set_terminal_title() {
    export ___TERMINAL_TITLE=$1
    PROMPT_COMMAND='echo -ne "\033]0;${___TERMINAL_TITLE}\007"'
}

